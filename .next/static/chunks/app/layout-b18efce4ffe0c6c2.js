(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{79445:function(e,t,s){Promise.resolve().then(s.bind(s,63238)),Promise.resolve().then(s.bind(s,74258)),Promise.resolve().then(s.t.bind(s,4338,23)),Promise.resolve().then(s.t.bind(s,5138,23)),Promise.resolve().then(s.t.bind(s,34332,23))},63238:function(e,t,s){"use strict";s.d(t,{Navigation:function(){return K}});var r=s(57437),a=s(2265),n=s(87138),i=s(16463),o=s(48298),l=s(87140),c=s(17583),d=s(38296),u=s(92699),h=s(24258),x=s(74697),f=s(42873),m=s(79512),b=s(1528),p=s(50495),N=s(28502),k=s(92940),g=s(76780),v=s(49590),j=s(59061),S=s(83102),_=s(67135),w=s(30311),O=s(85036);let y={N8N_WEBHOOK_LOG_SESSION:"",N8N_WEBHOOK_ADD_TASK:"",N8N_WEBHOOK_UPDATE_TASK:"",N8N_WEBHOOK_DELETE_TASK:"",N8N_WEBHOOK_GET_TASKS:"",N8N_WEBHOOK_CHAT:""},E={N8N_WEBHOOK_LOG_SESSION:"Log Session Webhook",N8N_WEBHOOK_ADD_TASK:"Add Task Webhook",N8N_WEBHOOK_UPDATE_TASK:"Update Task Webhook",N8N_WEBHOOK_DELETE_TASK:"Delete Task Webhook",N8N_WEBHOOK_GET_TASKS:"Get Tasks Webhook",N8N_WEBHOOK_CHAT:"Chat Assistant Webhook"},T={N8N_WEBHOOK_LOG_SESSION:"Called when a Pomodoro session is completed",N8N_WEBHOOK_ADD_TASK:"Called when a new task is created",N8N_WEBHOOK_UPDATE_TASK:"Called when a task is updated or moved",N8N_WEBHOOK_DELETE_TASK:"Called when a task is deleted",N8N_WEBHOOK_GET_TASKS:"Called to fetch all tasks from external source",N8N_WEBHOOK_CHAT:"Called to chat with LLM assistant agent"};function A(e){let{open:t,onClose:s}=e,[n,i]=(0,a.useState)(y),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)({}),{toast:f}=(0,w.pm)();(0,a.useEffect)(()=>{t&&m()},[t]);let m=()=>{try{let e=localStorage.getItem("taskmasterWebhooks");if(e){let t=JSON.parse(e);i({...y,...t})}else i(y);l(!1),h({})}catch(e){console.error("Failed to load webhooks from localStorage:",e),i(y)}},b=e=>{if(!e.trim())return!1;try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){return!1}},A=()=>Object.values(n).every(e=>!e||b(e)),K=(e,t)=>{i(s=>({...s,[e]:t})),l(!0),void 0!==u[e]&&h(t=>{let s={...t};return delete s[e],s})},W=async()=>{d(!0);let e={},t=!0;for(let[s,r]of Object.entries(n))if(r.trim()){let a=await (0,O.sp)(r);e[s]=a,a||(t=!1)}return h(e),d(!1),t},C=async()=>{if(!A()){f({title:"Invalid URLs",description:"Please ensure all webhook URLs are valid http/https URLs.",variant:"destructive"});return}if(!await W()){f({title:"Webhook Validation Failed",description:"Some webhook URLs are not reachable. Please check your n8n workflows.",variant:"destructive"});return}try{let e=Object.fromEntries(Object.entries(n).filter(e=>{let[t,s]=e;return s.trim()}));localStorage.setItem("taskmasterWebhooks",JSON.stringify(e)),l(!1),f({title:"Settings Saved",description:"Webhook URLs have been validated and saved successfully."}),s()}catch(e){console.error("Failed to save webhooks to localStorage:",e),f({title:"Save Failed",description:"Failed to save settings. Please try again.",variant:"destructive"})}},H=e=>n[e].trim()?!0===u[e]?(0,r.jsx)(k.Z,{className:"w-4 h-4 text-green-500"}):!1===u[e]?(0,r.jsx)(g.Z,{className:"w-4 h-4 text-red-500"}):null:null;return(0,r.jsxs)(N.Vq,{open:t,onClose:s,className:"relative z-50",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm","aria-hidden":"true"}),(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,r.jsxs)(N.Vq.Panel,{className:"glass-card rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)(N.Vq.Title,{className:"text-xl font-semibold text-text dark:text-dark-text",children:"Webhook Settings"}),(0,r.jsx)(p.z,{variant:"ghost",size:"sm",onClick:s,className:"text-text-light dark:text-dark-text hover:text-text dark:hover:text-white",children:(0,r.jsx)(x.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"text-sm text-text-light dark:text-dark-text",children:"Configure your n8n webhook URLs to enable external integrations. URLs will be validated before saving."}),Object.entries(E).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(_._,{htmlFor:t,className:"text-sm font-medium text-text dark:text-dark-text",children:s}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(S.I,{id:t,type:"url",value:n[t],onChange:e=>K(t,e.target.value),placeholder:"https://your-n8n-instance.com/webhook/...",className:"bg-base-1 dark:bg-dark-base-1 border-base-2 dark:border-dark-base-2 pr-10 ".concat(n[t]&&!b(n[t])?"border-red-300 dark:border-red-600":"")}),(0,r.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:H(t)})]}),(0,r.jsx)("p",{className:"text-xs text-text-light dark:text-dark-text",children:T[t]})]},t)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-base-2 dark:border-dark-base-2",children:[(0,r.jsxs)(p.z,{variant:"outline",onClick:()=>{i(y),h({}),l(!0)},className:"text-text-light dark:text-dark-text",children:[(0,r.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"Reset All"]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)(p.z,{variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsxs)(p.z,{onClick:C,disabled:!o||!A()||c,className:"btn-primary",children:[(0,r.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),c?"Validating...":"Save Settings"]})]})]})]})})]})}function K(){let e=(0,i.usePathname)(),{theme:t,setTheme:s}=(0,m.F)(),[N,k]=(0,a.useState)(!1),[g,v]=(0,a.useState)(!1),j=[{name:"Timer",href:"/",icon:o.Z},{name:"Dashboard",href:"/dashboard",icon:l.Z},{name:"Chat",href:"/chat",icon:c.Z}],S="dark"===t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("nav",{className:"fixed top-0 left-0 right-0 z-50 glass-card border-b",children:[(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-primary dark:bg-dark-primary rounded-lg flex items-center justify-center",children:(0,r.jsx)(o.Z,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("h1",{className:"text-xl font-bold text-text dark:text-dark-text",children:"TaskMaster"})]}),(0,r.jsx)("div",{className:"hidden md:flex items-center space-x-1",children:j.map(t=>{let s=t.icon,a=e===t.href;return(0,r.jsxs)(n.default,{href:t.href,className:"nav-link ".concat(a?"nav-link-active":""),children:[(0,r.jsx)(s,{className:"w-4 h-4 mr-2"}),t.name]},t.name)})}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 text-text-light dark:text-dark-text"}),(0,r.jsx)(b.rs,{checked:S,onChange:e=>s(e?"dark":"light"),className:"".concat(S?"bg-primary":"bg-base-2"," relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"),children:(0,r.jsx)("span",{className:"".concat(S?"translate-x-6":"translate-x-1"," inline-block h-4 w-4 transform rounded-full bg-white transition-transform")})}),(0,r.jsx)(u.Z,{className:"w-4 h-4 text-text-light dark:text-dark-text"})]}),(0,r.jsx)(p.z,{variant:"ghost",size:"sm",onClick:()=>v(!0),className:"text-text-light dark:text-dark-text hover:text-text dark:hover:text-white",children:(0,r.jsx)(h.Z,{className:"w-4 h-4"})})]}),(0,r.jsx)(p.z,{variant:"ghost",size:"sm",className:"md:hidden",onClick:()=>k(!N),children:N?(0,r.jsx)(x.Z,{className:"w-5 h-5"}):(0,r.jsx)(f.Z,{className:"w-5 h-5"})})]})}),N&&(0,r.jsx)("div",{className:"md:hidden border-t border-base-2 dark:border-dark-base-2",children:(0,r.jsxs)("div",{className:"px-4 py-4 space-y-2",children:[j.map(t=>{let s=t.icon,a=e===t.href;return(0,r.jsxs)(n.default,{href:t.href,onClick:()=>k(!1),className:"flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ".concat(a?"bg-primary text-white":"text-text dark:text-dark-text hover:bg-base-1 dark:hover:bg-dark-base-1"),children:[(0,r.jsx)(s,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:t.name})]},t.name)}),(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-text dark:text-dark-text",children:"Dark Mode"}),(0,r.jsx)(b.rs,{checked:S,onChange:e=>s(e?"dark":"light"),className:"".concat(S?"bg-primary":"bg-base-2"," relative inline-flex h-6 w-11 items-center rounded-full transition-colors"),children:(0,r.jsx)("span",{className:"".concat(S?"translate-x-6":"translate-x-1"," inline-block h-4 w-4 transform rounded-full bg-white transition-transform")})})]}),(0,r.jsxs)("button",{onClick:()=>{v(!0),k(!1)},className:"flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 text-text dark:text-dark-text hover:bg-base-1 dark:hover:bg-dark-base-1 w-full",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Settings"})]})]})})]}),(0,r.jsx)(A,{open:g,onClose:()=>v(!1)})]})}},74258:function(e,t,s){"use strict";s.d(t,{ThemeProvider:function(){return n}});var r=s(57437);s(2265);var a=s(79512);function n(e){let{children:t,...s}=e;return(0,r.jsx)(a.f,{...s,children:t})}},50495:function(e,t,s){"use strict";s.d(t,{d:function(){return l},z:function(){return c}});var r=s(57437),a=s(2265),n=s(71538),i=s(12218),o=s(37440);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:s})),ref:t,...d})});c.displayName="Button"},83102:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var r=s(57437),a=s(2265),n=s(37440);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},67135:function(e,t,s){"use strict";s.d(t,{_:function(){return c}});var r=s(57437),a=s(2265),n=s(38364),i=s(12218),o=s(37440);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,o.cn)(l(),s),...a})});c.displayName=n.f.displayName},30311:function(e,t,s){"use strict";s.d(t,{pm:function(){return h}});var r=s(2265);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function h(){let[e,t]=r.useState(c);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},85036:function(e,t,s){"use strict";s.d(t,{Ak:function(){return l},Lk:function(){return c},Pe:function(){return a},dU:function(){return o},sp:function(){return n},zt:function(){return i}});var r=s(20357);async function a(e,t){let s=i(e);if(!s)throw Error("".concat(e," not configured. Please set up webhook URLs in Settings."));let r=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("n8n ".concat(e," failed (").concat(r.status,"): ").concat(r.statusText));return r}async function n(e){try{let t=await fetch(e,{method:"HEAD"});return t.ok||405===t.status}catch(e){return!1}}function i(e){try{let t=localStorage.getItem("taskmasterWebhooks");if(t){let s=JSON.parse(t);if(s[e])return s[e]}}catch(e){console.error("Failed to read webhooks from localStorage:",e)}return r.env[e]||null}async function o(e){return a("N8N_WEBHOOK_LOG_SESSION",e)}async function l(){let e=i("N8N_WEBHOOK_GET_TASKS");if(!e)throw Error("Get tasks webhook URL not configured. Please set up webhook URLs in Settings.");let t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch tasks (".concat(t.status,"): ").concat(t.statusText));return t.json()}async function c(e){return(await a("N8N_WEBHOOK_CHAT",{message:e})).json()}},37440:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(44839),a=s(96164);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},34332:function(){}},function(e){e.O(0,[909,441,758,705,971,23,744],function(){return e(e.s=79445)}),_N_E=e.O()}]);