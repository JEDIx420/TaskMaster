(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{11273:function(t,e,a){Promise.resolve().then(a.bind(a,25247))},25247:function(t,e,a){"use strict";a.d(e,{ChatClient:function(){return b}});var r=a(57437),s=a(2265),o=a(85036),n=a(89902),i=a(17583),d=a(10883),c=a(50495);function l(t){let{onClearChat:e}=t;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-base-2 dark:border-dark-base-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-primary/10 dark:bg-dark-primary/10 rounded-full flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"w-5 h-5 text-primary dark:text-dark-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-text dark:text-dark-text",children:"Chat Assistant"}),(0,r.jsx)("p",{className:"text-sm text-text-light dark:text-dark-text",children:"Ask questions or use commands"})]})]}),(0,r.jsxs)(c.z,{variant:"ghost",size:"sm",onClick:e,className:"text-text-light dark:text-dark-text hover:text-red-500 dark:hover:text-red-400 transition-colors",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Clear Chat"]})]})}var u=a(34446),m=a(47207),p=a(76717);function f(t){let{messages:e}=t,a=(0,s.useRef)(null),o=()=>{var t;null===(t=a.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})};return(0,s.useEffect)(()=>{o()},[e]),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-b from-base-0/50 to-base-1/30 dark:from-dark-base-0/50 dark:to-dark-base-1/30 chat-messages",children:[(0,r.jsx)(u.M,{initial:!1,children:e.map((t,e)=>(0,r.jsx)(m.E.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,ease:"easeOut"},className:"flex ".concat("user"===t.from?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"max-w-[85%] md:max-w-[70%] rounded-2xl px-4 py-3 shadow-sm ".concat("user"===t.from?"bg-primary text-white rounded-br-md":"bg-primary/10 dark:bg-dark-primary/10 text-primary-900 dark:text-primary-100 rounded-bl-md border border-primary/20 dark:border-dark-primary/20"),children:[(0,r.jsx)("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:t.isTyping?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)(m.E.div,{className:"w-2 h-2 bg-current rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,delay:0}}),(0,r.jsx)(m.E.div,{className:"w-2 h-2 bg-current rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,delay:.2}}),(0,r.jsx)(m.E.div,{className:"w-2 h-2 bg-current rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,delay:.4}})]}),(0,r.jsx)("span",{className:"text-xs opacity-70",children:"Assistant is typing..."})]}):t.text}),(0,r.jsx)("div",{className:"text-xs mt-2 ".concat("user"===t.from?"text-white/70":"text-text-light/60 dark:text-dark-text/60"),children:(0,p.WU)(t.timestamp,"HH:mm")})]})},e))}),(0,r.jsx)("div",{ref:a})]})}var h=a(60994),x=a(83102);function y(t){let{onSendMessage:e,isLoading:a}=t,[o,n]=(0,s.useState)(""),[i,d]=(0,s.useState)(!1),l=(0,s.useRef)(null),p=async t=>{t.preventDefault(),o.trim()&&!a&&(n(""),await e(o))};return(0,r.jsxs)("div",{className:"border-t border-base-2 dark:border-dark-base-2 bg-base-0/80 dark:bg-dark-base-0/80 backdrop-blur-sm",children:[(0,r.jsx)(u.M,{children:i&&(0,r.jsx)(m.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2,ease:"easeOut"},className:"px-4 py-2 border-b border-base-2 dark:border-dark-base-2 bg-primary/5 dark:bg-dark-primary/5",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[(0,r.jsx)("span",{className:"text-text-light dark:text-dark-text font-medium",children:"\uD83D\uDCA1 Quick commands:"}),[{cmd:"/list",desc:"Show all tasks"},{cmd:"/add [task]",desc:"Create a new task"},{cmd:"/summary",desc:"Show task statistics"}].map((t,e)=>(0,r.jsxs)("button",{onClick:()=>{var e;n(t.cmd+("/add"===t.cmd?" ":"")),null===(e=l.current)||void 0===e||e.focus()},className:"px-2 py-1 bg-primary/10 dark:bg-dark-primary/10 text-primary dark:text-dark-primary rounded hover:bg-primary/20 dark:hover:bg-dark-primary/20 transition-colors",children:[(0,r.jsx)("span",{className:"font-mono",children:t.cmd}),(0,r.jsxs)("span",{className:"ml-1 opacity-70",children:["• ",t.desc]})]},e))]})})}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("form",{onSubmit:p,className:"flex gap-3",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(x.I,{ref:l,value:o,onChange:t=>n(t.target.value),onKeyPress:t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),p(t))},onFocus:()=>d(!0),onBlur:()=>d(!1),placeholder:"Type a message or try /list, /add [task], /summary...",className:"chat-input bg-base-1 dark:bg-dark-base-1/60 border-base-3 dark:border-dark-base-3 rounded-full px-4 py-3 pr-12 focus:ring-2 focus:ring-primary focus:border-transparent transition-all",disabled:a}),o&&(0,r.jsx)("button",{type:"button",onClick:()=>n(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-light dark:text-dark-text hover:text-text dark:hover:text-dark-text transition-colors",children:"\xd7"})]}),(0,r.jsx)(c.z,{type:"submit",disabled:!o.trim()||a,size:"sm",className:"btn-primary rounded-full w-12 h-12 p-0 shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50",children:(0,r.jsx)(h.Z,{className:"w-4 h-4"})})]})})]})}var g=a(24258);function b(){let{messages:t,sendMessage:e,clearChat:a,isLoading:i}=function(){let[t,e]=(0,s.useState)([{from:"agent",text:"Hi! I'm your TaskMaster assistant. I can help you with your tasks or answer questions. Try commands like /list, /add [task], or /summary, or just ask me anything!",timestamp:new Date}]),[a,r]=(0,s.useState)(!1),{tasks:i,addTask:d}=(0,n.X)(),c=async t=>{let e=t.toLowerCase();if("/list"===e){if(0===i.length)return"You have no tasks yet. Use /add [task name] to create your first task!";let t=i.filter(t=>!t.completed),e=i.filter(t=>t.completed),a="\uD83D\uDCCB **Your Tasks:**\n\n";return t.length>0&&(a+="**Active (".concat(t.length,"):**\n"),t.forEach(t=>{a+="• ".concat(t.title," (").concat(t.status,", ").concat(t.priority," priority)\n")}),a+="\n"),e.length>0&&(a+="**Completed (".concat(e.length,"):**\n"),e.forEach(t=>{a+="• ✅ ".concat(t.title,"\n")})),a}if(e.startsWith("/add ")){let e=t.slice(5).trim();if(!e)return"Please provide a task title. Example: /add Complete project documentation";try{return await d({title:e,priority:"medium",estimatedPomodoros:1}),'✅ Created task: "'.concat(e,'"')}catch(t){return"❌ Failed to create task: ".concat(t instanceof Error?t.message:"Unknown error")}}if("/summary"===e){let t=i.length,e=i.filter(t=>!t.completed),a=i.filter(t=>t.completed),r=i.reduce((t,e)=>t+e.completedPomodoros,0),s=e.filter(t=>"high"===t.priority);return"\uD83D\uDCCA **Task Summary:**\n      \n• Total tasks: ".concat(t,"\n• Active: ").concat(e.length,"\n• Completed: ").concat(a.length,"\n• Total pomodoros completed: ").concat(r,"\n• High priority tasks remaining: ").concat(s.length,"\n\n").concat(s.length>0?"\uD83D\uDEA8 Focus on your high priority tasks!":"\uD83D\uDC4D Great job staying on top of your tasks!")}return'❓ Unknown command "'.concat(t,'". Available commands:\n• /list - Show all tasks\n• /add [task] - Create a new task\n• /summary - Show task statistics\n\nOr just ask me anything about your tasks!')};return{messages:t,sendMessage:async t=>{if(!t.trim())return;let a={from:"user",text:t.trim(),timestamp:new Date};if(e(t=>[...t,a]),t.startsWith("/")){let a={from:"agent",text:await c(t),timestamp:new Date};e(t=>[...t,a]);return}let s={from:"agent",text:"typing...",timestamp:new Date,isTyping:!0};e(t=>[...t,s]),r(!0);try{let a=await (0,o.Lk)(t);e(t=>{var e;let r=[...t],s=r.length-1;return(null===(e=r[s])||void 0===e?void 0:e.isTyping)&&(r[s]={from:"agent",text:a.answer,timestamp:new Date}),r})}catch(t){console.error("Chat agent error:",t),e(t=>{var e;let a=[...t],r=a.length-1;return(null===(e=a[r])||void 0===e?void 0:e.isTyping)&&(a[r]={from:"agent",text:"Sorry, I'm having trouble connecting to my brain right now. Please try again in a moment!",timestamp:new Date}),a})}finally{r(!1)}},clearChat:()=>{e([{from:"agent",text:"Chat cleared! How can I help you today?",timestamp:new Date}])},isLoading:a}}();return((0,s.useEffect)(()=>{let t=setTimeout(()=>{let t=document.querySelector('input[placeholder*="Type a message"]');null==t||t.focus()},100);return()=>clearTimeout(t)},[]),(0,o.zt)("N8N_WEBHOOK_CHAT"))?(0,r.jsx)("div",{className:"min-h-screen bg-base-0 dark:bg-dark-base-0 pt-16",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-8 h-[calc(100vh-4rem)]",children:(0,r.jsxs)("div",{className:"h-full flex flex-col glass-card rounded-2xl overflow-hidden shadow-xl border border-base-2 dark:border-dark-base-2",children:[(0,r.jsx)(l,{onClearChat:a}),(0,r.jsx)(f,{messages:t}),(0,r.jsx)(y,{onSendMessage:e,isLoading:i})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-base-0 dark:bg-dark-base-0 pt-16",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-8 h-[calc(100vh-4rem)]",children:(0,r.jsx)("div",{className:"h-full flex flex-col items-center justify-center glass-card rounded-2xl border border-base-2 dark:border-dark-base-2",children:(0,r.jsxs)("div",{className:"text-center p-12",children:[(0,r.jsx)(g.Z,{className:"w-16 h-16 text-text-light dark:text-dark-text mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-text dark:text-dark-text mb-2",children:"Chat Assistant Not Configured"}),(0,r.jsx)("p",{className:"text-text-light dark:text-dark-text mb-6",children:"Set up the N8N_WEBHOOK_CHAT URL in Settings to enable AI-powered conversations with your task assistant."}),(0,r.jsxs)(c.z,{onClick:()=>{window.dispatchEvent(new CustomEvent("openSettings"))},className:"btn-primary",children:[(0,r.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Configure Chat Webhook"]})]})})})})}},50495:function(t,e,a){"use strict";a.d(e,{d:function(){return d},z:function(){return c}});var r=a(57437),s=a(2265),o=a(71538),n=a(12218),i=a(37440);let d=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((t,e)=>{let{className:a,variant:s,size:n,asChild:c=!1,...l}=t,u=c?o.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(d({variant:s,size:n,className:a})),ref:e,...l})});c.displayName="Button"},83102:function(t,e,a){"use strict";a.d(e,{I:function(){return n}});var r=a(57437),s=a(2265),o=a(37440);let n=s.forwardRef((t,e)=>{let{className:a,type:s,...n}=t;return(0,r.jsx)("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...n})});n.displayName="Input"},30311:function(t,e,a){"use strict";a.d(e,{pm:function(){return m}});var r=a(2265);let s=0,o=new Map,n=t=>{if(o.has(t))return;let e=setTimeout(()=>{o.delete(t),l({type:"REMOVE_TOAST",toastId:t})},1e6);o.set(t,e)},i=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:a}=e;return a?n(a):t.toasts.forEach(t=>{n(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===a||void 0===a?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},d=[],c={toasts:[]};function l(t){c=i(c,t),d.forEach(t=>{t(c)})}function u(t){let{...e}=t,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>l({type:"DISMISS_TOAST",toastId:a});return l({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:t=>{t||r()}}}),{id:a,dismiss:r,update:t=>l({type:"UPDATE_TOAST",toast:{...t,id:a}})}}function m(){let[t,e]=r.useState(c);return r.useEffect(()=>(d.push(e),()=>{let t=d.indexOf(e);t>-1&&d.splice(t,1)}),[t]),{...t,toast:u,dismiss:t=>l({type:"DISMISS_TOAST",toastId:t})}}},89902:function(t,e,a){"use strict";a.d(e,{X:function(){return i}});var r=a(2265),s=a(85036),o=a(30311);let n=[{id:"1",title:"Complete project documentation",description:"Write comprehensive docs for the new feature",status:"doing",priority:"high",estimatedPomodoros:3,completedPomodoros:1,dueDate:new Date(Date.now()+1728e5),createdAt:new Date,completed:!1},{id:"2",title:"Review code changes",status:"backlog",priority:"medium",estimatedPomodoros:2,completedPomodoros:0,createdAt:new Date,completed:!1},{id:"3",title:"Update dependencies",status:"done",priority:"low",estimatedPomodoros:1,completedPomodoros:1,createdAt:new Date,completed:!0}];function i(){let[t,e]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null),{toast:l}=(0,o.pm)(),u=async()=>{try{if(i(!0),c(null),!(0,s.zt)("N8N_WEBHOOK_GET_TASKS")){e(n),i(!1);return}let t=await (0,s.Ak)(),a=Array.isArray(t)?t.map(t=>({...t,estimatedPomodoros:Number(t.estimatedPomodoros)||1,completedPomodoros:Number(t.completedPomodoros)||0,status:t.status||"backlog",priority:t.priority||"medium",completed:"done"===t.status||!0===t.completed,dueDate:t.dueDate?new Date(t.dueDate):void 0,createdAt:t.createdAt?new Date(t.createdAt):new Date})):[];e(a)}catch(t){console.error("Failed to fetch tasks:",t),c("Failed to fetch tasks"),e(n)}finally{i(!1)}};(0,r.useEffect)(()=>{u()},[]);let m=async(t,a)=>{try{try{if((0,s.zt)("N8N_WEBHOOK_UPDATE_TASK")){var r;await (0,s.Pe)("N8N_WEBHOOK_UPDATE_TASK",{id:t,...a,dueDate:null===(r=a.dueDate)||void 0===r?void 0:r.toISOString()})}}catch(t){l({title:"Sync Warning",description:"Task updated locally but failed to sync: ".concat(t instanceof Error?t.message:"Unknown error"),variant:"destructive"})}e(e=>e.map(e=>e.id===t?{...e,...a}:e));try{await u()}catch(t){console.warn("Failed to refresh tasks after update:",t)}}catch(t){throw l({title:"Failed to update task",description:t instanceof Error?t.message:"Unknown error",variant:"destructive"}),t}},p=async e=>{let a=t.find(t=>t.id===e);a&&await m(e,{completed:!a.completed,status:a.completed?"backlog":"done"})},f=async e=>{try{let a=t.find(t=>t.id===e);if(!a)return;let r=a.completedPomodoros+1;await m(e,{completedPomodoros:r,...r>=a.estimatedPomodoros?{status:"done",completed:!0}:{}})}catch(t){throw console.error("Failed to increment task pomodoros:",t),t}};return{tasks:t,loading:a,error:d,addTask:async t=>{try{let r={id:crypto.randomUUID(),title:t.title,description:t.description,status:"backlog",priority:t.priority||"medium",estimatedPomodoros:t.estimatedPomodoros||1,completedPomodoros:0,dueDate:t.dueDate,createdAt:new Date,completed:!1};try{if((0,s.zt)("N8N_WEBHOOK_ADD_TASK")){var a;await (0,s.Pe)("N8N_WEBHOOK_ADD_TASK",{id:r.id,title:r.title,description:r.description,status:r.status,priority:r.priority,estimatedPomodoros:r.estimatedPomodoros,completedPomodoros:r.completedPomodoros,dueDate:null===(a=r.dueDate)||void 0===a?void 0:a.toISOString(),createdAt:r.createdAt.toISOString()})}}catch(t){l({title:"Sync Warning",description:"Task created locally but failed to sync: ".concat(t instanceof Error?t.message:"Unknown error"),variant:"destructive"})}e(t=>[r,...t]);try{await u()}catch(t){console.warn("Failed to refresh tasks after add:",t)}return r}catch(t){throw l({title:"Failed to create task",description:t instanceof Error?t.message:"Unknown error",variant:"destructive"}),t}},updateTask:m,deleteTask:async t=>{try{try{(0,s.zt)("N8N_WEBHOOK_DELETE_TASK")&&await (0,s.Pe)("N8N_WEBHOOK_DELETE_TASK",{id:t})}catch(t){l({title:"Sync Warning",description:"Task deleted locally but failed to sync: ".concat(t instanceof Error?t.message:"Unknown error"),variant:"destructive"})}e(e=>e.filter(e=>e.id!==t));try{await u()}catch(t){console.warn("Failed to refresh tasks after delete:",t)}}catch(t){throw l({title:"Failed to delete task",description:t instanceof Error?t.message:"Unknown error",variant:"destructive"}),t}},toggleTask:p,incrementTaskPomodoros:f,getTask:e=>t.find(t=>t.id===e),refetch:u}}},85036:function(t,e,a){"use strict";a.d(e,{Ak:function(){return d},Lk:function(){return c},Pe:function(){return s},dU:function(){return i},sp:function(){return o},zt:function(){return n}});var r=a(20357);async function s(t,e){let a=n(t);if(!a)throw Error("".concat(t," not configured. Please set up webhook URLs in Settings."));let r=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error("n8n ".concat(t," failed (").concat(r.status,"): ").concat(r.statusText));return r}async function o(t){try{let e=await fetch(t,{method:"HEAD"});return e.ok||405===e.status}catch(t){return!1}}function n(t){try{let e=localStorage.getItem("taskmasterWebhooks");if(e){let a=JSON.parse(e);if(a[t])return a[t]}}catch(t){console.error("Failed to read webhooks from localStorage:",t)}return r.env[t]||null}async function i(t){return s("N8N_WEBHOOK_LOG_SESSION",t)}async function d(){let t=n("N8N_WEBHOOK_GET_TASKS");if(!t)throw Error("Get tasks webhook URL not configured. Please set up webhook URLs in Settings.");let e=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch tasks (".concat(e.status,"): ").concat(e.statusText));return e.json()}async function c(t){return(await s("N8N_WEBHOOK_CHAT",{message:t})).json()}},37440:function(t,e,a){"use strict";a.d(e,{cn:function(){return o}});var r=a(44839),s=a(96164);function o(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return(0,s.m6)((0,r.W)(e))}}},function(t){t.O(0,[441,428,5,971,23,744],function(){return t(t.s=11273)}),_N_E=t.O()}]);